<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>跳绳锻炼计时器</title>
  <style>
    :root {
      --bg: #0b0f14;
      --fg: #e6f0ff;
      --accent: #4cc3ff;
      --rest: #ffb84c;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--fg);
      font-family: "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      gap: 16px;
    }
    .topbar {
      width: 100%;
      position: absolute;
      top: 16px;
      right: 24px;
      text-align: right;
      font-size: 24px;
      color: var(--accent);
    }
    .status {
      font-size: 28px;
      margin-bottom: 8px;
      letter-spacing: 2px;
    }
    .timer {
      font-size: 140px;
      font-weight: 700;
      font-variant-numeric: tabular-nums;
      letter-spacing: 4px;
    }
    .controls {
      margin-top: 20px;
      display: flex;
      gap: 12px;
    }
    button {
      font-size: 20px;
      padding: 10px 22px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    .start { background: var(--accent); color: #00121f; }
    .pause { background: #2b3a4a; color: var(--fg); }
    .reset { background: #3a2b2b; color: #ffdede; }
    .hint { font-size: 16px; color: #9fb3c8; }
  </style>
</head>
<body>
  <div class="topbar" id="groupLabel">第一组</div>
  <div class="status" id="phaseLabel">准备开始</div>
  <div class="timer" id="timerDisplay">60</div>
  <div class="controls">
    <button class="start" id="startBtn">开始</button>
    <button class="pause" id="pauseBtn">暂停</button>
    <button class="reset" id="resetBtn">重置</button>
  </div>
  <div class="hint" id="progressHint">第 1 组 · 第 1 次</div>

  <script>
    const TOTAL_GROUPS = 5;
    const JUMP_PER_GROUP = 4;
    const JUMP_SEC = 60;
    const REST_SEC = 30;
    const GROUP_REST_SEC = 60;

    const groupLabel = document.getElementById("groupLabel");
    const phaseLabel = document.getElementById("phaseLabel");
    const timerDisplay = document.getElementById("timerDisplay");
    const progressHint = document.getElementById("progressHint");
    const startBtn = document.getElementById("startBtn");
    const pauseBtn = document.getElementById("pauseBtn");
    const resetBtn = document.getElementById("resetBtn");

    let timerId = null;
    let isRunning = false;
    let currentGroup = 1;
    let currentJump = 1;
    let phase = "jump"; // jump | rest | groupRest | done
    let remaining = JUMP_SEC;

    function updateUI() {
      if (phase === "done") {
        groupLabel.textContent = "";
        phaseLabel.textContent = "跳绳锻炼已完成";
        timerDisplay.textContent = "00";
        progressHint.textContent = "全部完成";
        return;
      }

      groupLabel.textContent = `第${numberToChinese(currentGroup)}组`;
      progressHint.textContent = `第 ${currentGroup} 组 · 第 ${currentJump} 次`;

      if (phase === "jump") {
        phaseLabel.textContent = "跳绳";
        timerDisplay.style.color = "var(--accent)";
      } else {
        phaseLabel.textContent = "休息";
        timerDisplay.style.color = "var(--rest)";
      }

      timerDisplay.textContent = String(remaining).padStart(2, "0");
    }

    function numberToChinese(n) {
      const map = ["零","一","二","三","四","五"];
      return map[n] || String(n);
    }

    function nextPhase() {
      if (phase === "jump") {
        if (currentJump < JUMP_PER_GROUP) {
          phase = "rest";
          remaining = REST_SEC;
        } else {
          if (currentGroup < TOTAL_GROUPS) {
            phase = "groupRest";
            remaining = GROUP_REST_SEC;
          } else {
            phase = "done";
          }
        }
      } else if (phase === "rest") {
        phase = "jump";
        currentJump += 1;
        remaining = JUMP_SEC;
      } else if (phase === "groupRest") {
        phase = "jump";
        currentGroup += 1;
        currentJump = 1;
        remaining = JUMP_SEC;
      }
      updateUI();
    }

    function tick() {
      if (phase === "done") {
        stop();
        return;
      }
      if (remaining > 0) {
        remaining -= 1;
        updateUI();
      } else {
        nextPhase();
      }
    }

    function start() {
      if (isRunning || phase === "done") return;
      isRunning = true;
      timerId = setInterval(tick, 1000);
    }

    function stop() {
      isRunning = false;
      if (timerId) clearInterval(timerId);
      timerId = null;
    }

    function reset() {
      stop();
      currentGroup = 1;
      currentJump = 1;
      phase = "jump";
      remaining = JUMP_SEC;
      phaseLabel.textContent = "准备开始";
      timerDisplay.style.color = "var(--accent)";
      updateUI();
    }

    startBtn.addEventListener("click", () => {
      if (phaseLabel.textContent === "准备开始") {
        phaseLabel.textContent = "跳绳";
      }
      start();
    });
    pauseBtn.addEventListener("click", () => {
      if (isRunning) {
        stop();
        pauseBtn.textContent = "继续";
      } else {
        pauseBtn.textContent = "暂停";
        start();
      }
    });
    resetBtn.addEventListener("click", reset);

    updateUI();
  </script>
</body>
</html>
